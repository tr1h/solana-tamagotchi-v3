# 💰 СХЕМА ЭКОНОМИКИ TAMA ТОКЕНОВ

## 🏦 ОСНОВА СИСТЕМЫ

```
┌─────────────────────────────────────────────────────────────┐
│                    🏦 TREASURY WALLET                        │
│              TREASURY_MAIN_ACCOUNT                           │
│                                                              │
│         💰 НАЧАЛЬНЫЙ ЗАПАС: 1,000,000,000 TAMA              │
│                                                              │
│         📍 Создается: 1 РАЗ при первом запуске              │
│         📍 Хранится: База данных (таблица leaderboard)      │
│         📍 Назначение: Источник всех TAMA в игре            │
└─────────────────────────────────────────────────────────────┘
```

---

## 🔄 ПОТОК ТОКЕНОВ

### 📥 ВХОДЯЩИЕ ОПЕРАЦИИ (Treasury → Игроки)

```
🏦 TREASURY (1,000,000,000 TAMA)
    │
    ├─→ 👤 Новый игрок подключает кошелек
    │   └─→ +1,000 TAMA (приветственный бонус)
    │       📍 Проверка: игрок новый (нет в leaderboard)
    │       📍 Один раз на кошелек
    │
    ├─→ 🎨 Игрок минтит NFT питомца
    │   └─→ +1,000 TAMA (награда за минт)
    │       📍 Один раз на минт
    │       📍 Записывается в nft_mints
    │
    ├─→ 📅 Игрок заходит ежедневно
    │   └─→ +50 TAMA (ежедневная награда)
    │       📍 Один раз в 24 часа
    │       📍 Проверка: last_daily_claim
    │
    ├─→ 🎮 Игрок играет с питомцем
    │   └─→ +10 TAMA (за игру)
    │       📍 Каждое действие
    │       📍 Без ограничений (unlimited earning)
    │
    ├─→ 🍔 Игрок кормит питомца
    │   └─→ +5 TAMA (за кормление)
    │       📍 Каждое кормление
    │
    ├─→ 📚 Игрок тренирует питомца
    │   └─→ +15 TAMA (за тренировку)
    │       📍 Каждая тренировка
    │
    ├─→ ⬆️ Питомец повышает уровень
    │   └─→ +50-100 TAMA (за level up)
    │       📍 Каждый новый уровень
    │
    └─→ 🎯 Мини-игра TAMA Catch
        └─→ До 100 TAMA за игру
            📍 Зависит от результата
            📍 Unlimited earning
```

### 📤 ИСХОДЯЩИЕ ОПЕРАЦИИ (Игроки → Траты)

```
👤 ИГРОК (Баланс TAMA)
    │
    ├─→ 🍔 Покупка еды в магазине
    │   └─→ -10 до -20 TAMA
    │       📍 Яблоко: -10 TAMA
    │       📍 Стейк: -20 TAMA
    │
    ├─→ 🎾 Покупка игрушек
    │   └─→ -15 до -30 TAMA
    │       📍 Мяч: -15 TAMA
    │       📍 Игрушка: -30 TAMA
    │
    ├─→ 💊 Покупка лечения
    │   └─→ -10 до -20 TAMA
    │       📍 Таблетка: -10 TAMA
    │       📍 Инъекция: -20 TAMA
    │
    ├─→ 🍔 Кормление питомца
    │   └─→ -10 TAMA за действие
    │       📍 Каждое кормление
    │
    ├─→ 💊 Лечение питомца
    │   └─→ -15 TAMA за действие
    │       📍 Каждое лечение
    │
    └─→ ⚡ Эволюция питомца
        └─→ -50 TAMA
            📍 Требуется уровень 10+
            📍 Открывает новые способности
```

---

## 💾 СТРУКТУРА БАЗЫ ДАННЫХ

### 📊 ТАБЛИЦА: leaderboard

```sql
┌─────────────────────┬──────────┬─────────────────────────┐
│ wallet_address      │ tama     │ описание                │
├─────────────────────┼──────────┼─────────────────────────┤
│ TREASURY_MAIN_ACC.. │ 1000000  │ 🏦 Главный счет         │
│ 8bJixyhkqKJt...     │ 2500     │ 👤 Игрок 1              │
│ FVqqbyFMDysB...     │ 1750     │ 👤 Игрок 2              │
│ 2eyQycA4d4zu...     │ 890      │ 👤 Игрок 3              │
└─────────────────────┴──────────┴─────────────────────────┘

📍 Каждый кошелек = отдельный счет
📍 TAMA привязан жестко к wallet_address
📍 Обновляется при каждой операции
```

### 📊 ТАБЛИЦА: nft_mints

```sql
┌─────────────────┬──────────┬───────────┬──────────────┐
│ wallet_address  │ pet_name │ pet_type  │ created_at   │
├─────────────────┼──────────┼───────────┼──────────────┤
│ 8bJixyhkqKJt... │ Felix    │ Cat       │ 2024-01-15   │
│ FVqqbyFMDysB... │ Dragon   │ Dragon    │ 2024-01-16   │
└─────────────────┴──────────┴───────────┴──────────────┘

📍 Хранит NFT питомцев
📍 Связь с игроком через wallet_address
📍 1 NFT = 1 питомец = 1000 TAMA награда
```

---

## 🔄 ЖИЗНЕННЫЙ ЦИКЛ TAMA ТОКЕНА

### 1️⃣ СОЗДАНИЕ СИСТЕМЫ

```
[ПЕРВЫЙ ЗАПУСК ИГРЫ]
         ↓
[Проверка Treasury в базе]
         ↓
    [Не существует?]
         ↓
[Создание Treasury]
         ↓
[1,000,000,000 TAMA]
         ↓
[Запись в leaderboard]
         ↓
    [✅ ГОТОВО]
```

### 2️⃣ НОВЫЙ ИГРОК

```
[Подключение кошелька]
         ↓
[Проверка в leaderboard]
         ↓
    [Новый игрок?]
         ↓
[Treasury.awardNewUser()]
         ↓
[+1,000 TAMA игроку]
         ↓
[Запись в leaderboard]
         ↓
[Treasury: -1,000 TAMA]
         ↓
    [✅ ГОТОВО]
```

### 3️⃣ МИНТ NFT

```
[Игрок минтит NFT]
         ↓
[Выбор типа питомца]
         ↓
[Ввод имени]
         ↓
[Создание NFT]
         ↓
[Запись в nft_mints]
         ↓
[Treasury.awardMintReward()]
         ↓
[+1,000 TAMA игроку]
         ↓
[Обновление leaderboard]
         ↓
    [✅ ГОТОВО]
```

### 4️⃣ ИГРОВОЙ ПРОЦЕСС

```
[Игрок играет с питомцем]
         ↓
[Клик по питомцу]
         ↓
[+10 TAMA за действие]
         ↓
[Кормление: -10 TAMA]
         ↓
[Покупка в магазине: -20 TAMA]
         ↓
[Обновление баланса в leaderboard]
         ↓
[Синхронизация UI]
         ↓
    [✅ ЦИКЛ]
```

---

## 📈 ЭКОНОМИЧЕСКАЯ МОДЕЛЬ

### 💰 БАЛАНС ВХОДЯЩИХ И ИСХОДЯЩИХ

```
┌─────────────────────────────────────────────────────────┐
│                    ВХОДЯЩИЕ TAMA                         │
├─────────────────────────────────────────────────────────┤
│ Новый игрок:        +1,000 TAMA (1 раз)                │
│ Минт NFT:           +1,000 TAMA (1 раз)                │
│ Ежедневный вход:    +50 TAMA (каждый день)             │
│ Игра с питомцем:    +10 TAMA (unlimited)               │
│ Кормление:          +5 TAMA (unlimited)                │
│ Тренировка:         +15 TAMA (unlimited)               │
│ Level Up:           +50 TAMA (каждый уровень)          │
│ Мини-игра:          +100 TAMA (unlimited)              │
│                                                          │
│ 📊 ИТОГО ЗА ДЕНЬ: ~500-1000 TAMA (активный игрок)      │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│                    ИСХОДЯЩИЕ TAMA                        │
├─────────────────────────────────────────────────────────┤
│ Кормление питомца:  -10 TAMA (несколько раз в день)    │
│ Лечение питомца:    -15 TAMA (по необходимости)        │
│ Магазин - еда:      -20 TAMA (по желанию)              │
│ Магазин - игрушки:  -30 TAMA (по желанию)              │
│ Эволюция:           -50 TAMA (редко)                   │
│                                                          │
│ 📊 ИТОГО ЗА ДЕНЬ: ~100-300 TAMA (активный игрок)       │
└─────────────────────────────────────────────────────────┘

╔═══════════════════════════════════════════════════════╗
║        ЧИСТАЯ ПРИБЫЛЬ: +200 до +700 TAMA в день      ║
║        📈 Система стимулирует активную игру!          ║
╚═══════════════════════════════════════════════════════╝
```

---

## 🎯 ОСНОВНЫЕ ПРИНЦИПЫ

### ✅ ЧТО РАБОТАЕТ СЕЙЧАС:

```
1. 🏦 Treasury System
   └─→ Единый источник всех TAMA
   └─→ Создается 1 раз
   └─→ Отслеживает распределение

2. 💰 Simple TAMA System
   └─→ Единый баланс для каждого игрока
   └─→ Привязан к wallet_address
   └─→ Синхронизируется везде

3. 🎮 Награды за действия
   └─→ Новый игрок: +1,000 TAMA
   └─→ Минт NFT: +1,000 TAMA
   └─→ Ежедневный вход: +50 TAMA
   └─→ Игровые действия: +5-100 TAMA

4. 💸 Траты в игре
   └─→ Кормление: -10 TAMA
   └─→ Лечение: -15 TAMA
   └─→ Магазин: -10 до -50 TAMA
   └─→ Эволюция: -50 TAMA

5. 📊 База данных
   └─→ leaderboard: хранит балансы
   └─→ nft_mints: хранит NFT
   └─→ Все операции логируются

6. 🎨 Интерфейс
   └─→ Баланс в хедере (кликабельный)
   └─→ Модальное окно с деталями
   └─→ Treasury статистика
   └─→ История транзакций
```

### 🎯 ЦЕЛИ СИСТЕМЫ:

```
✅ Стимулировать активную игру
✅ Награждать постоянных игроков
✅ Создать экономический цикл
✅ Баланс между заработком и тратами
✅ Прозрачность всех операций
```

---

## 📱 ФАЙЛЫ СИСТЕМЫ

```
📁 solana-tamagotchi/
├── 🏦 js/treasury-system.js          (Treasury логика)
├── 💰 js/simple-tama-system.js       (TAMA операции)
├── 🎮 js/game.js                     (Игровая логика)
├── 🛒 js/shop.js                     (Магазин)
├── 🎨 js/mint.js                     (Минт NFT)
├── 👛 js/wallet.js                   (Кошельки)
├── 🗄️ FIX_DATABASE_SCHEMA.sql       (Схема базы)
└── 📊 admin.html                     (Админ панель)
```

---

## 🎉 ИТОГОВАЯ СХЕМА

```
                    ┌─────────────────┐
                    │  🏦 TREASURY    │
                    │  1,000,000,000  │
                    └────────┬────────┘
                             │
         ┌───────────────────┼───────────────────┐
         │                   │                   │
         ▼                   ▼                   ▼
    ┌────────┐          ┌────────┐         ┌────────┐
    │ 👤     │          │ 👤     │         │ 👤     │
    │ Игрок 1│          │ Игрок 2│         │ Игрок 3│
    │ 2500 T │          │ 1750 T │         │ 890 T  │
    └───┬────┘          └───┬────┘         └───┬────┘
        │                   │                   │
        ▼                   ▼                   ▼
    ┌────────┐          ┌────────┐         ┌────────┐
    │ 🐱 NFT │          │ 🐉 NFT │         │ 🐶 NFT │
    │ Felix  │          │ Dragon │         │ Buddy  │
    └────────┘          └────────┘         └────────┘
        │                   │                   │
        └───────────────────┴───────────────────┘
                            │
                            ▼
                    ┌───────────────┐
                    │  💸 ТРАТЫ     │
                    │  Магазин      │
                    │  Кормление    │
                    │  Лечение      │
                    └───────────────┘
```

---

**🎮 ВСЯ СИСТЕМА РАБОТАЕТ И ГОТОВА К ТЕСТИРОВАНИЮ!** ✨

